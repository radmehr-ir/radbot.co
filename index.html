<!DOCTYPE html>
<html lang="fa" manifest="app.manifest">  
<head>  
  <meta charset="UTF-8">  
  <title>RadBot ü§ñ</title>  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
  <meta name="theme-color" content="#121212">  
  <meta name="apple-mobile-web-app-capable" content="yes">  
  <link rel="icon" href="/1.png" type="image/png">  
  <link rel="apple-touch-icon" href="/1.png">  
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js" defer></script>  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer></script>  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js" defer></script>  
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js" defer></script>  
  <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.5.0/dist/transformers.min.js" defer></script>  
  <style>  
    :root {  
      --bg-color: #121212;  
      --text-color: #eee;  
      --accent-color: #00ffff;  
      --bot-color: #a5d6a7;  
      --user-color: #4fc3f7;  
      --input-bg: #222;  
      --input-border: #555;  
      --sidebar-bg: #1f1f1f;  
      --chat-bg: linear-gradient(135deg, #121212, #1a1a1a);  
      --bubble-bg-user: #007acc;  
      --bubble-bg-bot: #2d7a3e;  
    }  
    .light-theme {  
      --bg-color: #f2f2f2;  
      --text-color: #222;  
      --accent-color: #007acc;  
      --bot-color: #2d7a3e;  
      --user-color: #005f99;  
      --input-bg: #fff;  
      --input-border: #ccc;  
      --sidebar-bg: #e0e0e0;  
      --chat-bg: linear-gradient(135deg, #f2f2f2, #e6e6e6);  
      --bubble-bg-user: #005f99;  
      --bubble-bg-bot: #2d7a3e;  
    }  
    .custom-theme { /* ÿ®ÿ±ÿß€å ÿ™ŸÖ‚ÄåŸáÿß€å ÿ≥ŸÅÿßÿ±ÿ¥€å */ }  

    body, html {  
      margin: 0;  
      padding: 0;  
      height: 100%;  
      font-family: 'Vazirmatn', sans-serif;  
      font-size: clamp(16px, 4vw, 18px);  
      direction: rtl;  
      background: var(--bg-color);  
      color: var(--text-color);  
      overflow: hidden;  
      touch-action: manipulation; /* ÿ®Ÿáÿ®ŸàÿØ ÿ™ÿ¨ÿ±ÿ®Ÿá ŸÑŸÖÿ≥€å */  
    }  

    #canvasBg {  
      position: fixed;  
      top: 0;  
      left: 0;  
      width: 100vw;  
      height: 100vh;  
      z-index: -1;  
      opacity: 0.3;  
    }  

    #mainContainer {  
      display: flex;  
      height: 100vh;  
      width: 100vw;  
      transition: all 0.3s ease;  
    }  

    #chatSection {  
      flex-grow: 1;  
      display: flex;  
      flex-direction: column;  
      background: var(--chat-bg);  
      border-radius: 10px;  
      margin: 5px;  
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);  
      transition: margin 0.3s ease;  
    }  

    .fullscreen #chatSection {  
      margin: 0;  
      border-radius: 0;  
    }  

    header, footer {  
      background: var(--sidebar-bg);  
      padding: clamp(10px, 3vw, 15px);  
      text-align: center;  
      font-size: clamp(18px, 5vw, 22px);  
      color: var(--accent-color);  
      transition: background 0.3s ease;  
    }  

    header { border-bottom: 1px solid var(--input-border); }  
    footer { font-size: clamp(14px, 3vw, 16px); border-top: 1px solid var(--input-border); }  

    #chat {  
      flex: 1;  
      overflow-y: auto;  
      padding: clamp(10px, 3vw, 20px);  
      scroll-behavior: smooth;  
    }  

    .msg {  
      margin: clamp(10px, 2vw, 15px) 10px;  
      padding: clamp(8px, 2vw, 12px) clamp(10px, 3vw, 18px);  
      border-radius: 15px;  
      max-width: 80%;  
      position: relative;  
      animation: waveIn 0.5s ease-in;  
      white-space: pre-wrap;  
      background: var(--bubble-bg-user);  
      color: #fff;  
      transition: transform 0.2s ease;  
    }  

    .msg:hover {  
      transform: scale(1.02);  
    }  

    .user { margin-left: auto; text-align: right; }  
    .bot { background: var(--bubble-bg-bot); margin-right: auto; }  

    .msg:hover .msg-actions {  
      display: flex;  
    }  

    .msg-actions {  
      display: none;  
      position: absolute;  
      top: -20px;  
      left: 10px;  
      gap: 5px;  
    }  

    .msg-actions button {  
      background: #444;  
      color: #fff;  
      font-size: clamp(10px, 2.5vw, 12px);  
      padding: clamp(4px, 1.5vw, 6px) clamp(6px, 2vw, 8px);  
      border-radius: 3px;  
      touch-action: manipulation;  
    }  

    .msg-actions button:hover {  
      background: #555;  
    }  

    .timestamp {  
      font-size: clamp(10px, 2.5vw, 12px);  
      color: #ccc;  
      margin-right: 10px;  
      display: block;  
    }  

    .markdown-body { font-size: clamp(14px, 3.5vw, 16px); }  
    .markdown-body a { color: var(--accent-color); text-decoration: underline; }  
    .markdown-body ul, .markdown-body ol { padding-right: 20px; }  
    .markdown-body code { background: #333; padding: 2px 4px; border-radius: 4px;
